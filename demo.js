!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SegregateLocalStorage=t():e.SegregateLocalStorage=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";n.r(t);var r=class{constructor(e="",t=!1){this.allEvents=new Set,this.events={},this.onceCallbacks={},this.eventsPrefix=e,this.autoPrefix=t}getEventName(e,t=this.autoPrefix){return this.eventsPrefix&&t?`${this.eventsPrefix}:${e}`:e}on(e,t){let n=this.getEventName(e);return this.events[n]=this.events[n]||new Set,this.events[n].add(t),this}off(e,t){let n=this.getEventName(e);return this.events[n]?(this.events[n].delete(t),this):this}one(e,t){let n=this.getEventName(e);return this.events[n]=new Set([t]),this}once(e,t){let n=this.getEventName(e);return this.events[n]=this.events[n]||new Set,this.events[n].add(t),this.onceCallbacks[n]=this.onceCallbacks[n]||new Set,this.onceCallbacks[n].add(t),this}onAll(e){return this.allEvents.add(e),this}offAll(e){return this.allEvents.delete(e),this}emit(e,t){let n=this.getEventName(e,!0);return this.allEvents.forEach(n=>n(e,t)),this.events[n]&&this.events[n].forEach(r=>{var o,i;r(t),(null===(i=null===(o=this.onceCallbacks[n])||void 0===o?void 0:o.has)||void 0===i?void 0:i.call(o,r))&&(this.off(e,r),this.onceCallbacks[n].delete(r))}),this}};const o={},i={},s=e=>"object"==typeof e&&null!==e&&!Array.isArray(e);t.default=class extends r{constructor(e,t={},n=!1,r=localStorage){return super(),this.name="",o[e]?o[e]:(this.init(e,t,n,r),this)}set(e,t){if(this.isDestroyed)return;if(void 0===t)return;const n=JSON.parse(this.storage.getItem(this.name));if(!n)return;const r=n[e];n[e]=t;const o=this.storage.setItem(this.name,JSON.stringify(n));return this.emit("set",{key:e,val:t,oldVal:r}),this.emit(e,t),o}get(e){if(this.isDestroyed)return;const t=JSON.parse(this.storage.getItem(this.name));if(!t)return;const n=t[e];return this.emit("get",{key:e,val:n}),n}getAll(){var e;if(this.isDestroyed)return;const t=JSON.parse(null!==(e=this.storage.getItem(this.name))&&void 0!==e?e:"{}");return this.emit("getAll",t),t}remove(e){if(this.isDestroyed)return;const t=JSON.parse(this.storage.getItem(this.name));if(!t)return;const n=t[e];delete t[e];const r=this.storage.setItem(this.name,JSON.stringify(t));return this.emit("remove",{key:e,val:n}),r}clear(){if(!this.isDestroyed)return this.emit("clear"),this.storage.removeItem(this.name)}destroy(){this.isDestroyed||(i[this.name]=!0,delete o[this.name],this.emit("destroy"))}get isDestroyed(){return!!i[this.name]}init(e,t,n,r){return delete i[e],this.name=e,this.storage=r,((e,t,n,r=localStorage)=>{const o=r.getItem(e);if(!(e in r)||!o)return r.setItem(e,JSON.stringify(t)),!0;try{const i=JSON.parse(o);if(!o||!s(o)||!s(t))return!1;if(n){const e=new Set(Object.keys(t));Object.keys(i).forEach(t=>{e.has(t)||delete i[t]})}const a=Object.assign(Object.assign({},t),i);r.setItem(e,JSON.stringify(a))}catch(e){}})(e,t,n,r),o[e]=this,this.emit("init"),this}}},function(e,t,n){var r=n(2),o=n(3);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);e.exports=o.locals||{}},function(e,t,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],c=t.base?i[0]+t.base:i[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=a(u),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(f)):s.push({identifier:u,updater:p(f,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function h(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,g=0;function p(e,t){var n,r,o;if(t.singleton){var i=g++;n=m||(m=l(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=l(t),r=h.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=a(n[r]);s[o].references--}for(var i=c(e,t),l=0;l<n.length;l++){var u=a(n[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=i}}}},function(e,t,n){(t=n(4)(!1)).push([e.i,"body {\r\n    margin: 0;\r\n}\r\n\r\n.container {\r\n    width: 100%;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.row {\r\n    display: flex;\r\n    margin: 16px 0;\r\n}\r\n\r\n.col {\r\n    flex-grow: 1;\r\n    font-style: 0;\r\n    width: 50%;\r\n    padding: 0 16px;\r\n}\r\n\r\n.section {\r\n    margin-bottom: 16px;\r\n    border-bottom: 1px solid #ccc;\r\n}\r\n\r\nh4 {\r\n    margin-block-start: 0;\r\n    margin-block-end: 0;\r\n    padding: 1.33em 0;\r\n    text-align: center;\r\n    position: sticky;\r\n    top: 0;\r\n    background-color: #fff;\r\n}\r\n\r\n.code {\r\n    overflow: auto;\r\n    padding: 16px;\r\n    border: 1px solid #333;\r\n    border-radius: 4px;\r\n    background-color: #eee;\r\n}\r\n\r\n.section.event {\r\n    border-bottom: none;\r\n}\r\n\r\n.sectionBody {\r\n    overflow: auto;\r\n}\r\n\r\n.section.event .sectionBody {\r\n    max-height: 400px;\r\n}\r\n\r\n.eventRow {\r\n    margin-bottom: 16px;\r\n    border-bottom: 1px solid #ccc;\r\n    outline: none;\r\n}\r\n\r\n.m0 {\r\n    margin: 0;\r\n}\r\n\r\n.label {\r\n    font-weight: bold;\r\n}\r\n\r\n@media screen and (max-width: 1200px) {\r\n    .row {\r\n        flex-direction: column;\r\n    }\r\n\r\n    .col {\r\n        width: auto;\r\n    }\r\n}\r\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([o]).join("\n")}var s,a,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";n.r(t);n(1);var r=n(0),o=function(e,t){return void 0===t?"undefined":t},i=function(e,t){return JSON.stringify(e,o,t)};var s=class{constructor(){this.storage=new Map}get length(){return this.storage.size}clear(){return console.log("CustomStorage clear"),localStorage.clear(),this.storage.clear()}getItem(e){return console.log("CustomStorage getItem: ",e),this.storage.get(e)}key(e){return console.log("CustomStorage key:",e),this.getItem([...this.storage.keys()][e])}removeItem(e){return console.log("CustomStorage removeItem:",e),localStorage.removeItem(e),this.storage.delete(e)}setItem(e,t){return console.log("CustomStorage setItem:",{key:e,value:t}),localStorage.setItem(e,t),this.storage.set(e,t)}toString(){return"CustomStorage"}toJSON(){const e={};return this.storage.forEach((t,n)=>e[n]=t),e}};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.SegregateLocalStorage=r.default,window.CustomStorage=s;var c=new s;window.customStorage=c;var l=document.querySelector(".code.storage"),u=document.querySelector(".section.event .sectionBody"),d=document.querySelector(".btn.lastUpdate"),f=document.querySelector(".btn.newProp"),h=document.querySelector(".btn.removeNewProp"),m=document.querySelector(".btn.clearStorage"),g=[],p={moduleName:"TestStorageModule",lastUpdate:"06.01.2022 00:44:45"};window.initialState=p;var v=new r.default("TestStorageModule",p,!1,c);window.sls=v;var y=function(){var e=v.getAll(),t=JSON.stringify(e," ",4);l.textContent=t};y(),d.addEventListener("click",(function(){var e;v.set("lastUpdate",(e=new Date,"".concat(e.toLocaleDateString()," ").concat(e.toLocaleTimeString()))),y()})),f.addEventListener("click",(function(){v.set("newProp",!0),y()})),h.addEventListener("click",(function(){v.remove("newProp"),y()})),m.addEventListener("click",(function(){v.clear(),y()})),v.onAll((function(e,t){var n;"getAll"!==e&&(g.push({type:e,arg:t}),n=g.map((function(e){var t=e.type,n=e.arg,r=document.createElement("div");r.className="eventRow",r.tabIndex=0;var o=document.createElement("div");o.className="label",o.textContent=t;var s=document.createElement("pre");return s.className="eventCode","object"===a(n)&&null!==n&&(n=i(n," ",4).replaceAll('"undefined"',"undefined")),s.textContent=n,r.appendChild(o),r.appendChild(s),r})),u.textContent="",n.forEach((function(e){return u.appendChild(e)})),n[n.length-1].focus())}))}]).default}));